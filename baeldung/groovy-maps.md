# Groovy Maps

## 1. Обзор

[Groovy ](https://www.baeldung.com/groovy-language)расширяет API [Map](https://www.baeldung.com/java-collections) в [Java](https://www.baeldung.com/category/java/), предоставляя методы для таких операций, как фильтрация, поиск и сортировка. Он также предоставляет множество сокращенных способов создания карт и управления ими.

В этом уроке мы рассмотрим способ работы с картами в Groovy.

## 2. Создание Groovy Map

Мы можем использовать синтаксис литерала карты `[k:v]` для создания карт. По сути, это позволяет нам создавать экземпляр карты и определять записи в одной строке.

Пустую карту можно создать с помощью:

```groovy
def emptyMap = [:]
```

Аналогично, можно создать экземпляр карты со значениями, используя:

```groovy
def map = [name: "Jerry", age: 42, city: "New York"]
```

Обратите внимание, что **ключи не заключены в кавычки**, и по умолчанию Groovy создает экземпляр [java.util.LinkedHashMap](https://www.baeldung.com/java-linked-hashmap). Мы можем переопределить это поведение по умолчанию, используя оператор as.

## 3. Добавление предметов

Начнем с определения карты:

```groovy
def map = [name:"Jerry"]
```

Мы можем добавить ключ в карту:

```groovy
map["age"] = 42
```

Однако есть еще один способ, более похожий на Javascript, — использование обозначения свойств (оператор точки):

```groovy
map.city = "New York"
```

Другими словами, Groovy поддерживает доступ к парам ключ-значение подобно бину.

Мы также можем использовать переменные вместо литералов в качестве ключей при добавлении новых элементов на карту:

```groovy
def hobbyLiteral = "hobby"
def hobbyMap = [(hobbyLiteral): "Singing"]
map.putAll(hobbyMap)
assertTrue(hobbyMap.hobby == "Singing")
assertTrue(hobbyMap[hobbyLiteral] == "Singing")
```

Во-первых, нам нужно создать новую переменную, в которой будет храниться ключевое _hobby_. Затем мы используем эту переменную, заключенную в круглые скобки, с синтаксисом литерала карты, чтобы создать другую карту.

## 4. Получение предметов

Литеральный синтаксис или обозначение свойств можно использовать для получения элементов из карты.

Для карты, определенной как:

```groovy
def map = [name: "Jerry", age: 42, city: "New York", hobby: "Singing"]
```

Мы можем получить значение, соответствующее ключу _name_:

```groovy
assertTrue(map["name"] == "Jerry")
```

или

```groovy
assertTrue(map.name == "Jerry")
```

## 5. Удаление элементов

Мы можем удалить любую запись с карты на основе ключа, используя метод `remove()`, но иногда нам может потребоваться удалить с карты несколько записей. Мы можем сделать это, используя метод `minus()`.

Метод `minus()` принимает карту _Map_ и возвращает новую карту _new Map_ после удаления всех записей данной карты из базовой карты:

```groovy
def map = [1:20, a:30, 2:42, 4:34, ba:67, 6:39, 7:49]

def minusMap = map.minus([2:42, 4:34]);
assertTrue(minusMap == [1:20, a:30, ba:67, 6:39, 7:49])
```

Далее мы также можем удалять записи на основе условия. Мы можем добиться этого, используя метод `RemoveAll()`:

```groovy
minusMap.removeAll{it -> it.key instanceof String}
assertTrue(minusMap == [1:20, 6:39, 7:49])
```

И наоборот, чтобы сохранить все записи, удовлетворяющие условию, мы можем использовать метод `saveAll()`:

```groovy
minusMap.retainAll{it -> it.value % 2 == 0}
assertTrue(minusMap == [1:20])
```

## 6. Итерация по записям

Мы можем [перебирать записи](https://www.baeldung.com/groovy-map-iterating), используя методы `each()` и `eachWithIndex()`.

Метод `each()` предоставляет неявные параметры, такие как entry, key и value, которые соответствуют текущей записи.

Метод `eachWithIndex()` также предоставляет индекс в дополнение к Entry. Оба метода принимают замыкание [Closure](https://www.baeldung.com/groovy-closures) в качестве аргумента.
